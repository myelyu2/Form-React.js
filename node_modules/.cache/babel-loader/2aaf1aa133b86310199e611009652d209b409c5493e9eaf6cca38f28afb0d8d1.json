{"ast":null,"code":"// import Req from './requester'\n\nimport { getData } from './requester';\nconst ttl = 10 * 1000;\nlet cache = {\n  timeCreated: Date.now(),\n  data: null\n};\nlet setupDone = false;\nfunction setup() {\n  setupDone = true;\n  const res_raw = localStorage.getItem('reqCache');\n  if (res_raw) {\n    cache = JSON.parse(res_raw);\n  }\n  save();\n}\nfunction save() {\n  localStorage.setItem('reqCache', JSON.stringify(cache));\n}\nexport async function getDataCache() {\n  if (!setupDone) setup();\n  if (cache.data && Date.now() < cache.timeCreated + ttl) {\n    console.log('returned cached');\n    return cache.data;\n  }\n  const res = await getData();\n  cache = {\n    timeCreated: Date.now(),\n    data: res\n  };\n  save();\n  return res;\n}\n\n// export default class CachedRequester extends Req {\n//     static ttl = 10 * 1000 // 5s\n\n//     static cache = {\n//         timeCreated: Date.now(),\n//         data: null,\n//     }\n\n//     static setupDone = false\n\n//     static setup() {\n//         this.setupDone = true\n\n//         const res_raw = localStorage.getItem('reqCache')\n//         if (res_raw) {\n//             this.cache = JSON.parse(res_raw)\n//         }\n\n//         this.save()\n//     }\n\n//     static save() {\n//         localStorage.setItem('reqCache', JSON.stringify(this.cache))\n//     }\n\n//     static async getData() {\n//         if (!this.setupDone) \n//             this.setup()\n\n//         if (this.cache.data && Date.now() < this.cache.timeCreated + this.ttl) {\n//             console.log('returned cached')\n//             return this.cache.data\n//         }\n\n//         const res = await Req.getData()\n//         this.cache = {\n//             timeCreated: Date.now(),\n//             data: res,\n//         }\n//         this.save()\n\n//         return res\n//     }\n// }","map":{"version":3,"names":["getData","ttl","cache","timeCreated","Date","now","data","setupDone","setup","res_raw","localStorage","getItem","JSON","parse","save","setItem","stringify","getDataCache","console","log","res"],"sources":["/Users/malika/Desktop/react-pract/form/src/cachedRequester.js"],"sourcesContent":["// import Req from './requester'\n\nimport { getData } from './requester'\n\nconst ttl = 10 * 1000\n\nlet cache = {\n    timeCreated: Date.now(),\n    data: null,\n}\n\nlet setupDone = false\n\nfunction setup() {\n    setupDone = true\n\n    const res_raw = localStorage.getItem('reqCache')\n    if (res_raw) {\n        cache = JSON.parse(res_raw)\n    }\n\n    save()\n}\n\nfunction save() {\n    localStorage.setItem('reqCache', JSON.stringify(cache))\n}\n\nexport async function getDataCache() {\n    if (!setupDone) \n        setup()\n\n    if (cache.data && Date.now() < cache.timeCreated + ttl) {\n        console.log('returned cached')\n        return cache.data\n    }\n\n    const res = await getData()\n\n    cache = {\n        timeCreated: Date.now(),\n        data: res,\n    }\n    save()\n    return res\n}\n\n\n\n// export default class CachedRequester extends Req {\n//     static ttl = 10 * 1000 // 5s\n\n//     static cache = {\n//         timeCreated: Date.now(),\n//         data: null,\n//     }\n\n//     static setupDone = false\n\n//     static setup() {\n//         this.setupDone = true\n\n//         const res_raw = localStorage.getItem('reqCache')\n//         if (res_raw) {\n//             this.cache = JSON.parse(res_raw)\n//         }\n\n//         this.save()\n//     }\n    \n//     static save() {\n//         localStorage.setItem('reqCache', JSON.stringify(this.cache))\n//     }\n\n//     static async getData() {\n//         if (!this.setupDone) \n//             this.setup()\n\n//         if (this.cache.data && Date.now() < this.cache.timeCreated + this.ttl) {\n//             console.log('returned cached')\n//             return this.cache.data\n//         }\n\n//         const res = await Req.getData()\n//         this.cache = {\n//             timeCreated: Date.now(),\n//             data: res,\n//         }\n//         this.save()\n        \n//         return res\n//     }\n// }\n\n"],"mappings":"AAAA;;AAEA,SAASA,OAAO,QAAQ,aAAa;AAErC,MAAMC,GAAG,GAAG,EAAE,GAAG,IAAI;AAErB,IAAIC,KAAK,GAAG;EACRC,WAAW,EAAEC,IAAI,CAACC,GAAG,EAAE;EACvBC,IAAI,EAAE;AACV,CAAC;AAED,IAAIC,SAAS,GAAG,KAAK;AAErB,SAASC,KAAK,GAAG;EACbD,SAAS,GAAG,IAAI;EAEhB,MAAME,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EAChD,IAAIF,OAAO,EAAE;IACTP,KAAK,GAAGU,IAAI,CAACC,KAAK,CAACJ,OAAO,CAAC;EAC/B;EAEAK,IAAI,EAAE;AACV;AAEA,SAASA,IAAI,GAAG;EACZJ,YAAY,CAACK,OAAO,CAAC,UAAU,EAAEH,IAAI,CAACI,SAAS,CAACd,KAAK,CAAC,CAAC;AAC3D;AAEA,OAAO,eAAee,YAAY,GAAG;EACjC,IAAI,CAACV,SAAS,EACVC,KAAK,EAAE;EAEX,IAAIN,KAAK,CAACI,IAAI,IAAIF,IAAI,CAACC,GAAG,EAAE,GAAGH,KAAK,CAACC,WAAW,GAAGF,GAAG,EAAE;IACpDiB,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAC9B,OAAOjB,KAAK,CAACI,IAAI;EACrB;EAEA,MAAMc,GAAG,GAAG,MAAMpB,OAAO,EAAE;EAE3BE,KAAK,GAAG;IACJC,WAAW,EAAEC,IAAI,CAACC,GAAG,EAAE;IACvBC,IAAI,EAAEc;EACV,CAAC;EACDN,IAAI,EAAE;EACN,OAAOM,GAAG;AACd;;AAIA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}