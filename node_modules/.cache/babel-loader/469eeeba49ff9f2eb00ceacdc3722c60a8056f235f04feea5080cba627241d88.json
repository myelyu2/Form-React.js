{"ast":null,"code":"import axios from 'axios';\n\n// encode => {}\n\nasync function getData() {\n  const response = await axios.get(\"https://frontend-take-home.fetchrewards.com/form\");\n  return response.data;\n}\nexport async function getCachedData() {\n  let data = getData();\n  return data.then(res => {\n    res = {\n      ...res.data,\n      occupations: res.occupations,\n      states: res.states.map(state => state.abbreviation.concat(\" - \", state.name))\n    };\n\n    // Store the data in localStorage\n    localStorage.setItem(\"formData\", JSON.stringify(res));\n\n    // encode -> save (formDataHash)\n    console.log(res);\n    return res;\n  });\n  data.then(res => {\n    res = {\n      ...res.data,\n      occupations: res.occupations,\n      states: res.states.map(state => state.abbreviation.concat(\" - \", state.name))\n    };\n    // Store the data in localStorage\n    localStorage.setItem(\"formData\", JSON.stringify(res));\n\n    // encode -> save (formDataHash)\n    console.log(res);\n    return res;\n  });\n  console.log('DFKDFKM', data);\n  return data;\n}\nexport function getDataCache() {\n  // Check if the data is already in localStorage\n  let data = localStorage.getItem(\"formData\");\n\n  // get hashsum\n  // encode ->\n  // if hashsum === encode\n\n  // check ttl\n\n  if (data) {\n    console.log('GOT DATA FROM CACHE');\n    return Promise.resolve(JSON.parse(data));\n  }\n\n  // If not, send a request to the API\n  console.log('MADE A REQUEST');\n  return axios.get(\"https://frontend-take-home.fetchrewards.com/form\").then(response => {\n    // \n    // const res = {\n    //     ...response.data,\n    //     states: response.data.states.map(state => state.abbreviation),\n    // }\n\n    // Store the data in localStorage\n    localStorage.setItem(\"formData\", JSON.stringify(response.data));\n    // encode -> save (formDataHash)\n    return response.data;\n  });\n}","map":{"version":3,"names":["axios","getData","response","get","data","getCachedData","then","res","occupations","states","map","state","abbreviation","concat","name","localStorage","setItem","JSON","stringify","console","log","getDataCache","getItem","Promise","resolve","parse"],"sources":["/Users/malika/Desktop/react-pract/form/src/axios-api-setup.js"],"sourcesContent":["import axios from 'axios';\n\n// encode => {}\n\nasync function getData() {\n    const response = await axios.get(\"https://frontend-take-home.fetchrewards.com/form\")\n    return response.data;       \n}\n\nexport async function getCachedData() {\n    let data = getData()\n    return data.then(res => {\n        res = {\n            ...res.data,\n            occupations: res.occupations,\n            states: res.states.map(state => (state.abbreviation).concat(\" - \", (state.name)) ),\n        };\n\n        // Store the data in localStorage\n        localStorage.setItem(\"formData\", JSON.stringify(res));\n\n        // encode -> save (formDataHash)\n        console.log(res);\n        return res;\n    });\n    \n    data.then(res => {\n        res = {\n            ...res.data,\n            occupations: res.occupations,\n            states: res.states.map(state => (state.abbreviation).concat(\" - \", (state.name)) ),\n        }\n        // Store the data in localStorage\n        localStorage.setItem(\"formData\", JSON.stringify(res));\n\n        // encode -> save (formDataHash)\n        console.log(res)\n        return res;\n    });\n    console.log('DFKDFKM', data)\n    return data\n}\n\n\n\nexport function getDataCache() {\n    // Check if the data is already in localStorage\n    let data = localStorage.getItem(\"formData\");\n\n    // get hashsum\n    // encode ->\n    // if hashsum === encode\n\n    // check ttl\n\n    if (data) {\n        console.log('GOT DATA FROM CACHE')\n        return Promise.resolve(JSON.parse(data))\n    }\n    \n    // If not, send a request to the API\n    console.log('MADE A REQUEST')\n    return axios\n        .get(\"https://frontend-take-home.fetchrewards.com/form\")\n        .then(response => {\n\n            // \n            // const res = {\n            //     ...response.data,\n            //     states: response.data.states.map(state => state.abbreviation),\n            // }\n\n            // Store the data in localStorage\n            localStorage.setItem(\"formData\", JSON.stringify(response.data));\n            // encode -> save (formDataHash)\n            return response.data;\n        });\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;;AAEA,eAAeC,OAAO,GAAG;EACrB,MAAMC,QAAQ,GAAG,MAAMF,KAAK,CAACG,GAAG,CAAC,kDAAkD,CAAC;EACpF,OAAOD,QAAQ,CAACE,IAAI;AACxB;AAEA,OAAO,eAAeC,aAAa,GAAG;EAClC,IAAID,IAAI,GAAGH,OAAO,EAAE;EACpB,OAAOG,IAAI,CAACE,IAAI,CAACC,GAAG,IAAI;IACpBA,GAAG,GAAG;MACF,GAAGA,GAAG,CAACH,IAAI;MACXI,WAAW,EAAED,GAAG,CAACC,WAAW;MAC5BC,MAAM,EAAEF,GAAG,CAACE,MAAM,CAACC,GAAG,CAACC,KAAK,IAAKA,KAAK,CAACC,YAAY,CAAEC,MAAM,CAAC,KAAK,EAAGF,KAAK,CAACG,IAAI,CAAE;IACpF,CAAC;;IAED;IACAC,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACX,GAAG,CAAC,CAAC;;IAErD;IACAY,OAAO,CAACC,GAAG,CAACb,GAAG,CAAC;IAChB,OAAOA,GAAG;EACd,CAAC,CAAC;EAEFH,IAAI,CAACE,IAAI,CAACC,GAAG,IAAI;IACbA,GAAG,GAAG;MACF,GAAGA,GAAG,CAACH,IAAI;MACXI,WAAW,EAAED,GAAG,CAACC,WAAW;MAC5BC,MAAM,EAAEF,GAAG,CAACE,MAAM,CAACC,GAAG,CAACC,KAAK,IAAKA,KAAK,CAACC,YAAY,CAAEC,MAAM,CAAC,KAAK,EAAGF,KAAK,CAACG,IAAI,CAAE;IACpF,CAAC;IACD;IACAC,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACX,GAAG,CAAC,CAAC;;IAErD;IACAY,OAAO,CAACC,GAAG,CAACb,GAAG,CAAC;IAChB,OAAOA,GAAG;EACd,CAAC,CAAC;EACFY,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEhB,IAAI,CAAC;EAC5B,OAAOA,IAAI;AACf;AAIA,OAAO,SAASiB,YAAY,GAAG;EAC3B;EACA,IAAIjB,IAAI,GAAGW,YAAY,CAACO,OAAO,CAAC,UAAU,CAAC;;EAE3C;EACA;EACA;;EAEA;;EAEA,IAAIlB,IAAI,EAAE;IACNe,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IAClC,OAAOG,OAAO,CAACC,OAAO,CAACP,IAAI,CAACQ,KAAK,CAACrB,IAAI,CAAC,CAAC;EAC5C;;EAEA;EACAe,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;EAC7B,OAAOpB,KAAK,CACPG,GAAG,CAAC,kDAAkD,CAAC,CACvDG,IAAI,CAACJ,QAAQ,IAAI;IAEd;IACA;IACA;IACA;IACA;;IAEA;IACAa,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAAChB,QAAQ,CAACE,IAAI,CAAC,CAAC;IAC/D;IACA,OAAOF,QAAQ,CAACE,IAAI;EACxB,CAAC,CAAC;AACV"},"metadata":{},"sourceType":"module","externalDependencies":[]}