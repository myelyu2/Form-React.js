{"ast":null,"code":"import axios from 'axios';\n\n// encode => {}\n// server side encoding ??\n\nexport async function getData() {\n  console.log('MAKING A REQUEST');\n  const response = await axios.get(\"https://frontend-take-home.fetchrewards.com/form\");\n  return response.data;\n}\nexport async function getCachedData() {\n  let ttl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10000;\n  let data = getData();\n  const currentTime = Date.now();\n  console.log({\n    data,\n    currentTime\n  });\n  if (data && data.expiration && currentTime < data.expiration) {\n    console.log('GETTING DATA FROM CACHE');\n    console.log('KEKE', data.data);\n    return data.data;\n  } else {\n    console.log('MAKING A REQUEST');\n    data = await getData();\n    data = {\n      data: {\n        ...data,\n        occupations: data.occupations,\n        states: data.states.map(state => state.abbreviation.concat(\" - \", state.name))\n      },\n      expiration: currentTime + ttl\n    };\n    localStorage.setItem(\"formData\", JSON.stringify(data));\n    return data.data;\n  }\n\n  // return data.then(res => {\n  //     res = {\n  //         ...res.data,\n  //         occupations: res.occupations,\n  //         states: res.states.map(state => (state.abbreviation).concat(\" - \", (state.name)) ),\n  //     };\n\n  //     localStorage.setItem(\"formData\", JSON.stringify(res));\n\n  //     return res;\n  // });\n}","map":{"version":3,"names":["axios","getData","console","log","response","get","data","getCachedData","ttl","currentTime","Date","now","expiration","occupations","states","map","state","abbreviation","concat","name","localStorage","setItem","JSON","stringify"],"sources":["/Users/malika/Documents/GitHub/Form-React.js/src/axios-api-setup.js"],"sourcesContent":["import axios from 'axios';\n\n// encode => {}\n// server side encoding ??\n\nexport async function getData() {\n    console.log('MAKING A REQUEST')\n    const response = await axios.get(\"https://frontend-take-home.fetchrewards.com/form\")\n    return response.data;       \n}\n\nexport async function getCachedData(ttl = 10000) {\n    \n    let data = getData()\n    const currentTime = Date.now();\n    console.log({data, currentTime})\n\n    if (data && data.expiration && currentTime < data.expiration) {\n        console.log('GETTING DATA FROM CACHE')\n        console.log('KEKE', data.data)\n        return data.data;\n    } else {\n        console.log('MAKING A REQUEST')\n        data = await getData();\n        data = {\n            data: {\n                ...data,\n                occupations: data.occupations,\n                states: data.states.map(state => (state.abbreviation).concat(\" - \", (state.name)) ),\n            },\n            expiration: currentTime + ttl\n        };\n        localStorage.setItem(\"formData\", JSON.stringify(data));\n        return data.data;\n    }\n\n\n    // return data.then(res => {\n    //     res = {\n    //         ...res.data,\n    //         occupations: res.occupations,\n    //         states: res.states.map(state => (state.abbreviation).concat(\" - \", (state.name)) ),\n    //     };\n\n    //     localStorage.setItem(\"formData\", JSON.stringify(res));\n\n    //     return res;\n    // });\n}\n\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA;;AAEA,OAAO,eAAeC,OAAO,GAAG;EAC5BC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;EAC/B,MAAMC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAAC,kDAAkD,CAAC;EACpF,OAAOD,QAAQ,CAACE,IAAI;AACxB;AAEA,OAAO,eAAeC,aAAa,GAAc;EAAA,IAAbC,GAAG,uEAAG,KAAK;EAE3C,IAAIF,IAAI,GAAGL,OAAO,EAAE;EACpB,MAAMQ,WAAW,GAAGC,IAAI,CAACC,GAAG,EAAE;EAC9BT,OAAO,CAACC,GAAG,CAAC;IAACG,IAAI;IAAEG;EAAW,CAAC,CAAC;EAEhC,IAAIH,IAAI,IAAIA,IAAI,CAACM,UAAU,IAAIH,WAAW,GAAGH,IAAI,CAACM,UAAU,EAAE;IAC1DV,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtCD,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEG,IAAI,CAACA,IAAI,CAAC;IAC9B,OAAOA,IAAI,CAACA,IAAI;EACpB,CAAC,MAAM;IACHJ,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAC/BG,IAAI,GAAG,MAAML,OAAO,EAAE;IACtBK,IAAI,GAAG;MACHA,IAAI,EAAE;QACF,GAAGA,IAAI;QACPO,WAAW,EAAEP,IAAI,CAACO,WAAW;QAC7BC,MAAM,EAAER,IAAI,CAACQ,MAAM,CAACC,GAAG,CAACC,KAAK,IAAKA,KAAK,CAACC,YAAY,CAAEC,MAAM,CAAC,KAAK,EAAGF,KAAK,CAACG,IAAI,CAAE;MACrF,CAAC;MACDP,UAAU,EAAEH,WAAW,GAAGD;IAC9B,CAAC;IACDY,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACjB,IAAI,CAAC,CAAC;IACtD,OAAOA,IAAI,CAACA,IAAI;EACpB;;EAGA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}