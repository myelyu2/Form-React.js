{"ast":null,"code":"import Req from './requester';\nimport { getData } from './requester';\nexport default class CachedRequester extends Req {\n  // 5s\n\n  static setup() {\n    this.setupDone = true;\n    const res_raw = localStorage.getItem('reqCache');\n    if (res_raw) {\n      this.cache = JSON.parse(res_raw);\n    }\n    this.save();\n  }\n  static save() {\n    localStorage.setItem('reqCache', JSON.stringify(this.cache));\n  }\n  static async getData() {\n    if (!this.setupDone) this.setup();\n    if (this.cache.data && Date.now() < this.cache.timeCreated + this.ttl) {\n      console.log('returned cached');\n      return this.cache.data;\n    }\n    const res = await Req.getData();\n    this.cache = {\n      timeCreated: Date.now(),\n      data: res\n    };\n    this.save();\n    return res;\n  }\n}\nCachedRequester.ttl = 10 * 1000;\nCachedRequester.cache = {\n  timeCreated: Date.now(),\n  data: null\n};\nCachedRequester.setupDone = false;","map":{"version":3,"names":["Req","getData","CachedRequester","setup","setupDone","res_raw","localStorage","getItem","cache","JSON","parse","save","setItem","stringify","data","Date","now","timeCreated","ttl","console","log","res"],"sources":["/Users/malika/Desktop/react-pract/form/src/cachedRequester.js"],"sourcesContent":["import Req from './requester'\n\nimport { getData } from './requester'\n\n\nexport default class CachedRequester extends Req {\n    static ttl = 10 * 1000 // 5s\n\n    static cache = {\n        timeCreated: Date.now(),\n        data: null,\n    }\n\n    static setupDone = false\n\n    static setup() {\n        this.setupDone = true\n\n        const res_raw = localStorage.getItem('reqCache')\n        if (res_raw) {\n            this.cache = JSON.parse(res_raw)\n        }\n\n        this.save()\n    }\n    \n    static save() {\n        localStorage.setItem('reqCache', JSON.stringify(this.cache))\n    }\n\n    static async getData() {\n        if (!this.setupDone) \n            this.setup()\n\n        if (this.cache.data && Date.now() < this.cache.timeCreated + this.ttl) {\n            console.log('returned cached')\n            return this.cache.data\n        }\n\n        const res = await Req.getData()\n        this.cache = {\n            timeCreated: Date.now(),\n            data: res,\n        }\n        this.save()\n        \n        return res\n    }\n}\n\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,aAAa;AAE7B,SAASC,OAAO,QAAQ,aAAa;AAGrC,eAAe,MAAMC,eAAe,SAASF,GAAG,CAAC;EACtB;;EASvB,OAAOG,KAAK,GAAG;IACX,IAAI,CAACC,SAAS,GAAG,IAAI;IAErB,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAChD,IAAIF,OAAO,EAAE;MACT,IAAI,CAACG,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC;IACpC;IAEA,IAAI,CAACM,IAAI,EAAE;EACf;EAEA,OAAOA,IAAI,GAAG;IACVL,YAAY,CAACM,OAAO,CAAC,UAAU,EAAEH,IAAI,CAACI,SAAS,CAAC,IAAI,CAACL,KAAK,CAAC,CAAC;EAChE;EAEA,aAAaP,OAAO,GAAG;IACnB,IAAI,CAAC,IAAI,CAACG,SAAS,EACf,IAAI,CAACD,KAAK,EAAE;IAEhB,IAAI,IAAI,CAACK,KAAK,CAACM,IAAI,IAAIC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAACR,KAAK,CAACS,WAAW,GAAG,IAAI,CAACC,GAAG,EAAE;MACnEC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;MAC9B,OAAO,IAAI,CAACZ,KAAK,CAACM,IAAI;IAC1B;IAEA,MAAMO,GAAG,GAAG,MAAMrB,GAAG,CAACC,OAAO,EAAE;IAC/B,IAAI,CAACO,KAAK,GAAG;MACTS,WAAW,EAAEF,IAAI,CAACC,GAAG,EAAE;MACvBF,IAAI,EAAEO;IACV,CAAC;IACD,IAAI,CAACV,IAAI,EAAE;IAEX,OAAOU,GAAG;EACd;AACJ;AA3CqBnB,eAAe,CACzBgB,GAAG,GAAG,EAAE,GAAG,IAAI;AADLhB,eAAe,CAGzBM,KAAK,GAAG;EACXS,WAAW,EAAEF,IAAI,CAACC,GAAG,EAAE;EACvBF,IAAI,EAAE;AACV,CAAC;AANgBZ,eAAe,CAQzBE,SAAS,GAAG,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}