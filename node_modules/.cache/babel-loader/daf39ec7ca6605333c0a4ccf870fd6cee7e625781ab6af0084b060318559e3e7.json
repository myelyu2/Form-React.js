{"ast":null,"code":"import { getData } from './requester';\nconst ttl = 5 * 60 * 1000; // 5 minutes\nlet setupDone = false;\nlet cache = {\n  timeCreated: Date.now(),\n  data: null\n};\nfunction setup() {\n  setupDone = true;\n  const res_raw = localStorage.getItem('reqCache');\n  if (res_raw) {\n    cache = JSON.parse(res_raw);\n  }\n  save();\n}\nfunction save() {\n  localStorage.setItem('reqCache', JSON.stringify(cache));\n}\nexport async function getDataCache() {\n  if (!setupDone) setup();\n  if (cache.data && Date.now() < cache.timeCreated + ttl) {\n    console.log('GOT DATA FROM CACHE');\n    return cache.data;\n  }\n  const res = await getData();\n  cache = {\n    timeCreated: Date.now(),\n    data: res\n  };\n  save();\n  return res;\n}","map":{"version":3,"names":["getData","ttl","setupDone","cache","timeCreated","Date","now","data","setup","res_raw","localStorage","getItem","JSON","parse","save","setItem","stringify","getDataCache","console","log","res"],"sources":["/Users/malika/Desktop/react-pract/form/src/cachedRequester.js"],"sourcesContent":["import { getData } from './requester'\n\nconst ttl = 5 * 60 * 1000 // 5 minutes\nlet setupDone = false\n\nlet cache = {\n    timeCreated: Date.now(),\n    data: null,\n}\n\nfunction setup() {\n    setupDone = true\n    const res_raw = localStorage.getItem('reqCache')\n\n    if (res_raw) { cache = JSON.parse(res_raw)}\n\n    save()\n}\n\nfunction save() { localStorage.setItem('reqCache', JSON.stringify(cache)) }\n\nexport async function getDataCache() {\n    if (!setupDone) setup()\n\n    if (cache.data && Date.now() < cache.timeCreated + ttl) {\n        console.log('GOT DATA FROM CACHE')\n        return cache.data\n    }\n\n    const res = await getData()\n\n    cache = {\n        timeCreated: Date.now(),\n        data: res,\n    }\n\n    save()\n    return res\n}"],"mappings":"AAAA,SAASA,OAAO,QAAQ,aAAa;AAErC,MAAMC,GAAG,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,EAAC;AAC1B,IAAIC,SAAS,GAAG,KAAK;AAErB,IAAIC,KAAK,GAAG;EACRC,WAAW,EAAEC,IAAI,CAACC,GAAG,EAAE;EACvBC,IAAI,EAAE;AACV,CAAC;AAED,SAASC,KAAK,GAAG;EACbN,SAAS,GAAG,IAAI;EAChB,MAAMO,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EAEhD,IAAIF,OAAO,EAAE;IAAEN,KAAK,GAAGS,IAAI,CAACC,KAAK,CAACJ,OAAO,CAAC;EAAA;EAE1CK,IAAI,EAAE;AACV;AAEA,SAASA,IAAI,GAAG;EAAEJ,YAAY,CAACK,OAAO,CAAC,UAAU,EAAEH,IAAI,CAACI,SAAS,CAACb,KAAK,CAAC,CAAC;AAAC;AAE1E,OAAO,eAAec,YAAY,GAAG;EACjC,IAAI,CAACf,SAAS,EAAEM,KAAK,EAAE;EAEvB,IAAIL,KAAK,CAACI,IAAI,IAAIF,IAAI,CAACC,GAAG,EAAE,GAAGH,KAAK,CAACC,WAAW,GAAGH,GAAG,EAAE;IACpDiB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IAClC,OAAOhB,KAAK,CAACI,IAAI;EACrB;EAEA,MAAMa,GAAG,GAAG,MAAMpB,OAAO,EAAE;EAE3BG,KAAK,GAAG;IACJC,WAAW,EAAEC,IAAI,CAACC,GAAG,EAAE;IACvBC,IAAI,EAAEa;EACV,CAAC;EAEDN,IAAI,EAAE;EACN,OAAOM,GAAG;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}