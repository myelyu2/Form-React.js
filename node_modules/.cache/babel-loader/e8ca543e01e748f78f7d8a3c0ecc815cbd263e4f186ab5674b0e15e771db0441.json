{"ast":null,"code":"import Req from './requester';\nexport default class CachedRequester extends Req {\n  // 5s\n\n  static setup() {\n    this.setupDone = true;\n    const res_raw = localStorage.getItem('reqCache');\n    if (res_raw) {\n      this.cache = JSON.parse(res_raw);\n    }\n    localStorage.setItem('reqCache', JSON.stringify(this.cache));\n  }\n  static async getData() {\n    if (!this.setupDone) this.setup();\n    if (this.cache.data && Date.now() < this.cache.timeCreated + this.ttl) return this.cache.data;\n    const res = await Req.getData();\n    this.cache = {\n      timeCreated: Date.now(),\n      data: res\n    };\n    return res;\n  }\n}\nCachedRequester.ttl = 5 * 1000;\nCachedRequester.cache = {\n  timeCreated: Date.now(),\n  data: null\n};\nCachedRequester.setupDone = false;","map":{"version":3,"names":["Req","CachedRequester","setup","setupDone","res_raw","localStorage","getItem","cache","JSON","parse","setItem","stringify","getData","data","Date","now","timeCreated","ttl","res"],"sources":["/Users/malika/Desktop/react-pract/form/src/cachedRequester.js"],"sourcesContent":["import Req from './requester'\n\nexport default class CachedRequester extends Req {\n    static ttl = 5 * 1000 // 5s\n\n    static cache = {\n        timeCreated: Date.now(),\n        data: null,\n    }\n\n    static setupDone = false\n\n    static setup() {\n        this.setupDone = true\n\n        const res_raw = localStorage.getItem('reqCache')\n        if (res_raw) {\n            this.cache = JSON.parse(res_raw)\n        }\n\n        localStorage.setItem('reqCache', JSON.stringify(this.cache))\n    }\n\n    static async getData() {\n        if (!this.setupDone) \n            this.setup()\n\n        if (this.cache.data && Date.now() < this.cache.timeCreated + this.ttl)\n            return this.cache.data\n\n        const res = await Req.getData()\n        this.cache = {\n            timeCreated: Date.now(),\n            data: res,\n        }\n        return res\n    }\n}\n\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,aAAa;AAE7B,eAAe,MAAMC,eAAe,SAASD,GAAG,CAAC;EACvB;;EAStB,OAAOE,KAAK,GAAG;IACX,IAAI,CAACC,SAAS,GAAG,IAAI;IAErB,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAChD,IAAIF,OAAO,EAAE;MACT,IAAI,CAACG,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC;IACpC;IAEAC,YAAY,CAACK,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACG,SAAS,CAAC,IAAI,CAACJ,KAAK,CAAC,CAAC;EAChE;EAEA,aAAaK,OAAO,GAAG;IACnB,IAAI,CAAC,IAAI,CAACT,SAAS,EACf,IAAI,CAACD,KAAK,EAAE;IAEhB,IAAI,IAAI,CAACK,KAAK,CAACM,IAAI,IAAIC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAACR,KAAK,CAACS,WAAW,GAAG,IAAI,CAACC,GAAG,EACjE,OAAO,IAAI,CAACV,KAAK,CAACM,IAAI;IAE1B,MAAMK,GAAG,GAAG,MAAMlB,GAAG,CAACY,OAAO,EAAE;IAC/B,IAAI,CAACL,KAAK,GAAG;MACTS,WAAW,EAAEF,IAAI,CAACC,GAAG,EAAE;MACvBF,IAAI,EAAEK;IACV,CAAC;IACD,OAAOA,GAAG;EACd;AACJ;AAnCqBjB,eAAe,CACzBgB,GAAG,GAAG,CAAC,GAAG,IAAI;AADJhB,eAAe,CAGzBM,KAAK,GAAG;EACXS,WAAW,EAAEF,IAAI,CAACC,GAAG,EAAE;EACvBF,IAAI,EAAE;AACV,CAAC;AANgBZ,eAAe,CAQzBE,SAAS,GAAG,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}